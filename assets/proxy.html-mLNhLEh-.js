import{_ as s,r as p,o as l,c as i,b as t,e as o,w as r,d as e,a as c}from"./app-7rGY8hGP.js";const d={},h=t("h1",{id:"正向代理与反向代理",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#正向代理与反向代理","aria-hidden":"true"},"#"),e(" 正向代理与反向代理")],-1),g={class:"table-of-contents"},u={href:"https://cloud.tencent.com/developer/article/1418457",target:"_blank",rel:"noopener noreferrer"},_=c('<h2 id="正向代理" tabindex="-1"><a class="header-anchor" href="#正向代理" aria-hidden="true">#</a> 正向代理</h2><p>正向代理（forward proxy）：是一个位于客户端和目标服务器之间的服务器(代理服务器)，为了从目标服务器取得内容，客户端向代理服务器发送一个请求并指定目标，然后代理服务器向目标服务器转交请求并将获得的内容返回给客户端。</p><p>这种代理其实在生活中是比较常见的，比如访问外国网站技术，其用到的就是代理技术。</p><p>有时候，用户想要访问某国外网站，该网站无法在国内直接访问，但是我们可以访问到一个代理服务器，这个代理服务器可以访问到这个国外网站。这样呢，用户对该国外网站的访问就需要通过代理服务器来转发请求，并且该代理服务器也会将请求的响应再返回给用户。这个上网的过程就是用到了正向代理。</p><p><img src="https://img-life.oss-cn-beijing.aliyuncs.com/doc/202403111603452.png" alt="image.png|950"></p><p>这个过程其实和租房子很像。</p><p>租房子的时候，一般情况下，我们很难联系到房东，因为有些房东为了图方便，只把自己的房屋信息和钥匙交给中介了。而房客想要租房子，只能通过中介才能联系到房东。而对于房东来说，他可能根本不知道真正要租他的房子的人是谁，他只知道是中介在联系他。</p><p>这里面一共有三个角色，租客（用户）、中介（代理服务器）和房东（国外网站，目标服务器）。引入中介（代理服务器）的原因是用户无法联系上房东（用户无法访问国外网站）。</p><p><strong>所以，正向代理，其实是&quot;代理服务器&quot;代理了&quot;客户端&quot;，去和&quot;目标服务器&quot;进行交互。</strong></p><p>通过正向代理服务器访问目标服务器，目标服务器是不知道真正的客户端是谁的，甚至不知道访问自己的是一个代理（有时候中介也直接冒充租客）。</p><h3 id="正向代理的用途" tabindex="-1"><a class="header-anchor" href="#正向代理的用途" aria-hidden="true">#</a> 正向代理的用途</h3><p><strong>突破访问限制</strong></p><p>通过代理服务器，可以突破自身IP访问限制，访问国外网站，教育网等。</p><p>即，租客可以通过中介，来解决无法联系上房东的问题。</p><p><strong>提高访问速度</strong></p><p>通常代理服务器都设置一个较大的硬盘缓冲区，会将部分请求的响应保存到缓冲区中，当其他用户再访问相同的信息时， 则直接由缓冲区中取出信息，传给用户，以提高访问速度。</p><p>即，中介手里留存了很多房源信息和钥匙，可以直接带租客去看房。</p><p><strong>隐藏客户端真实IP</strong></p><p>上网者也可以通过这种方法隐藏自己的IP，免受攻击。</p><p>即，房东并不知道租客的真实身份。PS：但是中介知道了，可能骚扰更多….</p><h2 id="反向代理" tabindex="-1"><a class="header-anchor" href="#反向代理" aria-hidden="true">#</a> 反向代理</h2><p>反向代理（reverse proxy）：是指以代理服务器来接受Internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给Internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。</p><p>我们在租房子的过程中，除了有些房源需要通过中介以外，还有一些是可以直接通过房东来租的。用户直接找到房东租房的这种情况就是我们不使用代理直接访问国内的网站的情况。</p><p>还有一种情况，就是我们以为我们接触的是房东，其实有时候也有可能并非房主本人，有可能是他的亲戚、朋友，甚至是二房东。但是我们并不知道和我们沟通的并不是真正的房东。这种帮助真正的房主租房的二房东其实就是反向代理服务器。这个过程就是反向代理。</p><p>对于常用的场景，就是我们在Web开发中用到的负载均衡服务器（二房东），客户端（租客）发送请求到负载均衡服务器（二房东）上，负载均衡服务器（二房东）再把请求转发给一台真正的服务器（房东）来执行，再把执行结果返回给客户端（租客）。</p><p><img src="https://img-life.oss-cn-beijing.aliyuncs.com/doc/202403111604936.png" alt="image.png|950"></p><p><strong>所以，反向代理，其实是&quot;代理服务器&quot;代理了&quot;目标服务器&quot;，去和&quot;客户端&quot;进行交互。</strong></p><p>通过反向代理服务器访问目标服务器时，客户端是不知道真正的目标服务器是谁的，甚至不知道自己访问的是一个代理。</p><h3 id="反向代理的用途" tabindex="-1"><a class="header-anchor" href="#反向代理的用途" aria-hidden="true">#</a> 反向代理的用途</h3><p><strong>隐藏服务器真实IP</strong></p><p>使用反向代理，可以对客户端隐藏服务器的IP地址。即，租客并不房东知道的真实身份。</p><p><strong>负载均衡</strong></p><p>反向代理服务器可以做负载均衡，根据所有真实服务器的负载情况，将客户端请求分发到不同的真实服务器上。</p><p>即，二房东发现房主本人很忙，于是找到房主的妻子帮忙处理租房事宜。</p><p><strong>提高访问速度</strong></p><p>反向代理服务器可以对于静态内容及短时间内有大量访问请求的动态内容提供缓存服务，提高访问速度。</p><p>即，二房东同样有房屋信息和钥匙。</p><p><strong>提供安全保障</strong></p><p>反向代理服务器可以作为应用层防火墙，为网站提供对基于Web的攻击行为（例如DoS/DDoS）的防护，更容易排查恶意软件等。还可以为后端服务器统一提供加密和SSL加速（如SSL终端代理），提供HTTP访问认证等。</p><p>即，二房东可以有效的保护房东的安全。</p><h3 id="正向代理和反向代理的区别" tabindex="-1"><a class="header-anchor" href="#正向代理和反向代理的区别" aria-hidden="true">#</a> 正向代理和反向代理的区别</h3><p>虽然正向代理服务器和反向代理服务器所处的位置都是客户端和真实服务器之间，所做的事情也都是把客户端的请求转发给服务器，再把服务器的响应转发给客户端，但是二者之间还是有一定的差异的。</p><ol><li><strong>正向代理其实是客户端的代理</strong>，帮助客户端访问其无法访问的服务器资源。<strong>反向代理则是服务器的代理</strong>，帮助服务器做负载均衡，安全防护等。</li><li><strong>正向代理一般是客户端架设的</strong>，比如在自己的机器上安装一个代理软件。而<strong>反向代理一般是服务器架设的</strong>，比如在自己的机器集群中部署一个反向代理服务器。</li><li><strong>正向代理中，服务器不知道真正的客户端到底是谁</strong>，以为访问自己的就是真实的客户端。而在<strong>反向代理中，客户端不知道真正的服务器是谁</strong>，以为自己访问的就是真实的服务器。</li><li>正向代理和反向代理的作用和目的不同。<strong>正向代理主要是用来解决访问限制问题。而反向代理则是提供负载均衡、安全防护等作用。二者均能提高访问速度。</strong></li></ol>',43);function f(m,x){const n=p("router-link"),a=p("ExternalLinkIcon");return l(),i("div",null,[h,t("nav",g,[t("ul",null,[t("li",null,[o(n,{to:"#正向代理"},{default:r(()=>[e("正向代理")]),_:1}),t("ul",null,[t("li",null,[o(n,{to:"#正向代理的用途"},{default:r(()=>[e("正向代理的用途")]),_:1})])])]),t("li",null,[o(n,{to:"#反向代理"},{default:r(()=>[e("反向代理")]),_:1}),t("ul",null,[t("li",null,[o(n,{to:"#反向代理的用途"},{default:r(()=>[e("反向代理的用途")]),_:1})]),t("li",null,[o(n,{to:"#正向代理和反向代理的区别"},{default:r(()=>[e("正向代理和反向代理的区别")]),_:1})])])])])]),t("p",null,[t("a",u,[e("于有人把正向代理和反向代理解释的明明白白了"),o(a)])]),_])}const q=s(d,[["render",f],["__file","proxy.html.vue"]]);export{q as default};
